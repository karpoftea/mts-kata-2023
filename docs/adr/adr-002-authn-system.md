# Status
Proposed

# Context
Для системы необходимо реализовать регистрацию и аутентификацию пользователей. Пользователь приходит в систему как Гость (т.е. неавторизованный пользователь), далее проходит процедуру регистрации, которая включает заполнение обязательных полей (например, возраст). После успешной регистрации Студенты должны иметь возможность аутентифицироваться в системе; Преподаватели должны дождаться подтверждения регистрации от СотрудникаПоддержки/Администратора, после чего смогут аутентифицироваться в системе. Аутентифицированные пользователи получают доступ к функциям системы на основании своих ролей. Нужно предусмотреть механизм регистрации СотрудниковПоддержки и Администраторов.
Предъявляется требование к доступности в 99%.

# Decision
Для аутентификации мы будем использовать МТС ID. Протоколом аутентификации будет OIDC. 

Делегирование отвественности за управление учетными записями позволит снизить расходы на поддержку этих функций в системе и сосредоточиться на ее базовом функционале - предостовлении образовательных услуг. Уровень доступности МТС ID 99% (система является MissionCritical), этого достаточно для системы.

Мы разделим интерфейсы входа и регистрации для Студентов и остальных ролей (Преподавателей, Администраторов, СотрудниковПоддержки). Студенты впервые пришедшие в систему, после прохождения аутентификации в МТС ID, будут направлены на форму заполнения информации о профиле, которая включит обязательные поля: возраст, ФИО и тп. После успешного заполнения формы учетная запись Студента активируется и назначается роль Студент.

Мы будем разделять регистрацию для Студентов и остальных ролей .

Будет два эндпоинта для логина: для студентов и сотрудников.
Сотрудники это преподаватели, админ и поддержка.

Регистрация сотрудников ведет на MTS ID, где redirect_url это раздел сайта для сотрудников (например, https://pokoleniem.ru/admin или поддомен https://admin.pokoleniem.ru).
Когда регистрируется первый сотрудник, то он автоматически становится админом.
Админ может раздавать роли, активировать пользователей.

Когда регистрируется второй сотрудник, то он выбирает роль: Админ, Преподаватель, Поддержка. После чего отправляется запрос админу на подтверждение - это фактически активация пользователя. 

Регистрация студентов ведет на MTS ID, где redirect_url это раздел сайта для студентов (например, https://pokoleniem.ru/student или корень сайта https://pokoleniem.ru/).

Ко

# Alternatives

# Notes
